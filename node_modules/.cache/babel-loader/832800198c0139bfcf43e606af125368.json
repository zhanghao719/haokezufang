{"ast":null,"code":"import \"antd-mobile/lib/flex/style/css\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport \"antd-mobile/lib/carousel/style/css\";\nimport _Carousel from \"antd-mobile/lib/carousel\";\nimport \"antd-mobile/lib/nav-bar/style/css\";\nimport _NavBar from \"antd-mobile/lib/nav-bar\";\nimport \"antd-mobile/lib/icon/style/css\";\nimport _Icon from \"antd-mobile/lib/icon\";\nimport \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\nimport \"antd-mobile/lib/modal/style/css\";\nimport _Modal from \"antd-mobile/lib/modal\";\nvar _jsxFileName = \"F:\\\\\\u767E\\u5EA6\\u4E91\\u4E0B\\u8F7D\\\\React\\\\hkzf\\\\haokezufang\\\\src\\\\components\\\\HouseDetail\\\\index.js\";\nimport React, { Component } from 'react';\n// import axios from 'axios'\nimport HouseItem from '../HouseItem';\nimport styles from './index.module.css';\nimport HousePackage from '../HousePackage';\nimport { getHouseDetail, getHouseFav, addFav, delFav } from '../../utils/api/house';\nimport { isAuth } from '../../utils';\nconst BASE_URL = `http://localhost:8080`; // 猜你喜欢\n\nconst recommendHouses = [{\n  id: 1,\n  src: BASE_URL + '/img/message/1.png',\n  desc: '72.32㎡/南 北/低楼层',\n  title: '安贞西里 3室1厅',\n  price: 4500,\n  tags: ['随时看房']\n}, {\n  id: 2,\n  src: BASE_URL + '/img/message/2.png',\n  desc: '83㎡/南/高楼层',\n  title: '天居园 2室1厅',\n  price: 7200,\n  tags: ['近地铁']\n}, {\n  id: 3,\n  src: BASE_URL + '/img/message/3.png',\n  desc: '52㎡/西南/低楼层',\n  title: '角门甲4号院 1室1厅',\n  price: 4300,\n  tags: ['集中供暖']\n}]; // 百度地图\n\nconst BMap = window.BMap;\nconst labelStyle = {\n  position: 'absolute',\n  zIndex: -7982820,\n  backgroundColor: 'rgb(238, 93, 91)',\n  color: 'rgb(255, 255, 255)',\n  height: 25,\n  padding: '5px 10px',\n  lineHeight: '14px',\n  borderRadius: 3,\n  boxShadow: 'rgb(204, 204, 204) 2px 2px 2px',\n  whiteSpace: 'nowrap',\n  fontSize: 12,\n  userSelect: 'none'\n};\nconst alert = _Modal.alert;\nexport default class HouseDetail extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      // 数据加载中状态\n      isLoading: false,\n      // 房屋详情\n      houseInfo: {\n        // 房屋图片\n        houseImg: [],\n        // 标题\n        title: '',\n        // 标签\n        tags: [],\n        // 租金\n        price: 0,\n        // 房型\n        roomType: '',\n        // 房屋面积\n        size: 0,\n        // 朝向\n        oriented: [],\n        // 楼层\n        floor: '',\n        // 小区名称\n        community: '',\n        // 地理位置\n        coord: {\n          latitude: '39.928033',\n          longitude: '116.529466'\n        },\n        // 房屋配套\n        supporting: [],\n        // 房屋标识\n        houseCode: '',\n        // 房屋描述\n        description: ''\n      },\n      // 表示房源是否收藏\n      isFavorite: false\n    };\n\n    this.handleFavorite = async () => {\n      const {\n        history,\n        match,\n        location\n      } = this.props;\n      console.log(this.props);\n\n      if (!isAuth()) {\n        alert('提示', '登录后才能收藏房源，是否登录？', [{\n          text: '取消'\n        }, {\n          text: '去登录',\n          onPress: async () => {\n            history.push('/login', {\n              backUrl: location.pathname\n            });\n          }\n        }]);\n      } else {\n        const {\n          isFavorite\n        } = this.state;\n        const {\n          id\n        } = match.params;\n\n        if (isFavorite) {\n          // 删除收藏\n          const res = await delFav(id);\n          res.status === 200 && this.setState({\n            isFavorite: false\n          });\n        } else {\n          // 添加收藏\n          const res = await addFav(id);\n\n          if (res.status === 200) {\n            this.setState({\n              isFavorite: true\n            });\n          } else {\n            _Toast.offline(res.description);\n          }\n        }\n      }\n    };\n\n    this.checkHouseFav = async () => {\n      if (!isAuth) return;\n      const {\n        id\n      } = this.props.match.params;\n      let res = await getHouseFav(id);\n      console.log(res);\n\n      if (res.status === 200) {\n        this.setState({\n          isFavorite: res.data.isFavorite\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    // 获取配置好的路由参数：\n    // console.log('路由参数对象：', this.props.match.params)\n    // console.log(this.props)\n    // 获取房屋数据\n    this.getHouseDetail();\n    this.checkHouseFav();\n  }\n  /* \r\n      收藏房源：\r\n        1 给收藏按钮绑定单击事件，创建方法 handleFavorite 作为事件处理程序。\r\n      2 调用 isAuth 方法，判断是否登录。\r\n      3 如果未登录，则使用 Modal.alert 提示用户是否去登录。\r\n      4 如果点击取消，则不做任何操作。\r\n      5 如果点击去登录，就跳转到登录页面，同时传递 state（登录后，再回到房源收藏页面）。\r\n      \r\n      6 根据 isFavorite 判断，当前房源是否收藏。\r\n      7 如果未收藏，就调用添加收藏接口，添加收藏。\r\n      8 如果已收藏，就调用删除收藏接口，去除收藏。\r\n        alert('提示', '登录后才能收藏房源，是否去登录?', [\r\n        { text: '取消' },\r\n        {\r\n          text: '去登录',\r\n          onPress: () => {}\r\n        }\r\n      ])\r\n    */\n  // 处理收藏\n\n\n  // 获取房屋详细信息\n  async getHouseDetail() {\n    console.log(this.props.history);\n    const {\n      id\n    } = this.props.match.params;\n    console.log('get house id:', id); // 开启loading\n\n    this.setState({\n      isLoading: true\n    }); // const res = await axios.get(\n    //   `http://localhost:8080/houses/5cc47c8d1439630e5b47d45d`\n    // )\n\n    const res = await getHouseDetail(id); // console.log(res.data.body)\n\n    this.setState({\n      houseInfo: res.data,\n      isLoading: false\n    });\n    const {\n      community,\n      coord\n    } = res.data; // 渲染地图\n\n    this.renderMap(community, coord);\n  } // 渲染轮播图结构\n\n\n  renderSwipers() {\n    const {\n      houseInfo: {\n        houseImg\n      }\n    } = this.state;\n    return houseImg.map(item => React.createElement(\"a\", {\n      key: item,\n      href: \"http://itcast.cn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: BASE_URL + item,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    })));\n  } // 渲染地图\n\n\n  renderMap(community, coord) {\n    const {\n      latitude,\n      longitude\n    } = coord;\n    const map = new BMap.Map('map');\n    const point = new BMap.Point(longitude, latitude);\n    map.centerAndZoom(point, 17);\n    const label = new BMap.Label('', {\n      position: point,\n      offset: new BMap.Size(0, -36)\n    });\n    label.setStyle(labelStyle);\n    label.setContent(`\n        <span>${community}</span>\n        <div class=\"${styles.mapArrow}\"></div>\n      `);\n    map.addOverlay(label);\n  } // 渲染标签\n\n\n  renderTags() {\n    const {\n      houseInfo: {\n        tags\n      }\n    } = this.state;\n    return tags.map((item, index) => {\n      // 如果标签数量超过3个，后面的标签就都展示位第三个标签的样式\n      let tagClass = '';\n\n      if (index > 2) {\n        tagClass = 'tag3';\n      } else {\n        tagClass = 'tag' + (index + 1);\n      }\n\n      return React.createElement(\"span\", {\n        key: item,\n        className: [styles.tag, styles[tagClass]].join(' '),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, item);\n    });\n  }\n\n  render() {\n    const {\n      isLoading,\n      houseInfo: {\n        community = '',\n        title,\n        price,\n        roomType,\n        size,\n        floor,\n        oriented,\n        supporting,\n        description\n      },\n      isFavorite\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: styles.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, React.createElement(_NavBar, {\n      mode: \"dark\",\n      icon: React.createElement(_Icon, {\n        type: \"left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }),\n      onLeftClick: () => this.props.history.go(-1),\n      rightContent: [React.createElement(\"i\", {\n        key: \"share\",\n        className: \"iconfont icon-share\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      })],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, \"\\u623F\\u5C4B\\u8BE6\\u60C5\"), React.createElement(\"div\", {\n      className: styles.slides,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, !isLoading ? React.createElement(_Carousel, {\n      autoplay: true,\n      infinite: true,\n      autoplayInterval: 5000,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, this.renderSwipers()) : ''), React.createElement(\"div\", {\n      className: styles.info,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: styles.infoTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }, title), React.createElement(_Flex, {\n      className: styles.tags,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(_Flex.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, this.renderTags())), React.createElement(_Flex, {\n      className: styles.infoPrice,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, React.createElement(_Flex.Item, {\n      className: styles.infoPriceItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, price, React.createElement(\"span\", {\n      className: styles.month,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, \"/\\u6708\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, \"\\u79DF\\u91D1\")), React.createElement(_Flex.Item, {\n      className: styles.infoPriceItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, roomType), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, \"\\u623F\\u578B\")), React.createElement(_Flex.Item, {\n      className: styles.infoPriceItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, size, \"\\u5E73\\u7C73\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, \"\\u9762\\u79EF\"))), React.createElement(_Flex, {\n      className: styles.infoBasic,\n      align: \"start\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, React.createElement(_Flex.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: styles.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, \"\\u88C5\\u4FEE\\uFF1A\"), \"\\u7CBE\\u88C5\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: styles.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, \"\\u697C\\u5C42\\uFF1A\"), floor)), React.createElement(_Flex.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: styles.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342\n      },\n      __self: this\n    }, \"\\u671D\\u5411\\uFF1A\"), oriented.join('、')), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: styles.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, \"\\u7C7B\\u578B\\uFF1A\"), \"\\u666E\\u901A\\u4F4F\\u5B85\")))), React.createElement(\"div\", {\n      className: styles.map,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.mapTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, \"\\u5C0F\\u533A\\uFF1A\", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, community)), React.createElement(\"div\", {\n      className: styles.mapContainer,\n      id: \"map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, \"\\u5730\\u56FE\")), React.createElement(\"div\", {\n      className: styles.about,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.houseTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, \"\\u623F\\u5C4B\\u914D\\u5957\"), supporting.length === 0 ? React.createElement(\"div\", {\n      className: styles.titleEmpty,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }, \"\\u6682\\u65E0\\u6570\\u636E\") : React.createElement(HousePackage, {\n      list: supporting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: styles.set,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.houseTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375\n      },\n      __self: this\n    }, \"\\u623F\\u6E90\\u6982\\u51B5\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.contact,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: BASE_URL + '/img/avatar.png',\n      alt: \"\\u5934\\u50CF\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: styles.useInfo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }, \"\\u738B\\u5973\\u58EB\"), React.createElement(\"div\", {\n      className: styles.userAuth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"iconfont icon-auth\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }), \"\\u5DF2\\u8BA4\\u8BC1\\u623F\\u4E3B\"))), React.createElement(\"span\", {\n      className: styles.userMsg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }, \"\\u53D1\\u6D88\\u606F\")), React.createElement(\"div\", {\n      className: styles.descText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, description || '暂无房屋描述'))), React.createElement(\"div\", {\n      className: styles.recommend,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.houseTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398\n      },\n      __self: this\n    }, \"\\u731C\\u4F60\\u559C\\u6B22\"), React.createElement(\"div\", {\n      className: styles.items,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }, recommendHouses.map(item => React.createElement(HouseItem, Object.assign({}, item, {\n      key: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }))))), React.createElement(_Flex, {\n      className: styles.fixedBottom,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406\n      },\n      __self: this\n    }, React.createElement(_Flex.Item, {\n      onClick: this.handleFavorite,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: BASE_URL + (isFavorite ? '/img/star.png' : '/img/unstar.png'),\n      className: styles.favoriteImg,\n      alt: \"\\u6536\\u85CF\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: styles.favorite,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415\n      },\n      __self: this\n    }, isFavorite ? '已收藏' : '收藏')), React.createElement(_Flex.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419\n      },\n      __self: this\n    }, \"\\u5728\\u7EBF\\u54A8\\u8BE2\"), React.createElement(_Flex.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"tel:400-618-4000\",\n      className: styles.telephone,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421\n      },\n      __self: this\n    }, \"\\u7535\\u8BDD\\u9884\\u7EA6\"))));\n  }\n\n}","map":{"version":3,"sources":["F:/百度云下载/React/hkzf/haokezufang/src/components/HouseDetail/index.js"],"names":["React","Component","HouseItem","styles","HousePackage","getHouseDetail","getHouseFav","addFav","delFav","isAuth","BASE_URL","recommendHouses","id","src","desc","title","price","tags","BMap","window","labelStyle","position","zIndex","backgroundColor","color","height","padding","lineHeight","borderRadius","boxShadow","whiteSpace","fontSize","userSelect","alert","HouseDetail","state","isLoading","houseInfo","houseImg","roomType","size","oriented","floor","community","coord","latitude","longitude","supporting","houseCode","description","isFavorite","handleFavorite","history","match","location","props","console","log","text","onPress","push","backUrl","pathname","params","res","status","setState","offline","checkHouseFav","data","componentDidMount","renderMap","renderSwipers","map","item","Map","point","Point","centerAndZoom","label","Label","offset","Size","setStyle","setContent","mapArrow","addOverlay","renderTags","index","tagClass","tag","join","render","root","go","slides","info","infoTitle","infoPrice","infoPriceItem","month","infoBasic","mapTitle","mapContainer","about","houseTitle","length","titleEmpty","set","contact","user","useInfo","userAuth","userMsg","descText","recommend","items","fixedBottom","favoriteImg","favorite","telephone"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAOC,YAAP,MAAyB,iBAAzB;AACA,SAASC,cAAT,EAAyBC,WAAzB,EAAsCC,MAAtC,EAA8CC,MAA9C,QAA4D,uBAA5D;AACA,SAASC,MAAT,QAAuB,aAAvB;AACA,MAAMC,QAAQ,GAAI,uBAAlB,C,CACA;;AACA,MAAMC,eAAe,GAAG,CACtB;AACEC,EAAAA,EAAE,EAAE,CADN;AAEEC,EAAAA,GAAG,EAAEH,QAAQ,GAAG,oBAFlB;AAGEI,EAAAA,IAAI,EAAE,gBAHR;AAIEC,EAAAA,KAAK,EAAE,WAJT;AAKEC,EAAAA,KAAK,EAAE,IALT;AAMEC,EAAAA,IAAI,EAAE,CAAC,MAAD;AANR,CADsB,EAStB;AACEL,EAAAA,EAAE,EAAE,CADN;AAEEC,EAAAA,GAAG,EAAEH,QAAQ,GAAG,oBAFlB;AAGEI,EAAAA,IAAI,EAAE,WAHR;AAIEC,EAAAA,KAAK,EAAE,UAJT;AAKEC,EAAAA,KAAK,EAAE,IALT;AAMEC,EAAAA,IAAI,EAAE,CAAC,KAAD;AANR,CATsB,EAiBtB;AACEL,EAAAA,EAAE,EAAE,CADN;AAEEC,EAAAA,GAAG,EAAEH,QAAQ,GAAG,oBAFlB;AAGEI,EAAAA,IAAI,EAAE,YAHR;AAIEC,EAAAA,KAAK,EAAE,aAJT;AAKEC,EAAAA,KAAK,EAAE,IALT;AAMEC,EAAAA,IAAI,EAAE,CAAC,MAAD;AANR,CAjBsB,CAAxB,C,CA2BA;;AACA,MAAMC,IAAI,GAAGC,MAAM,CAACD,IAApB;AAEA,MAAME,UAAU,GAAG;AACjBC,EAAAA,QAAQ,EAAE,UADO;AAEjBC,EAAAA,MAAM,EAAE,CAAC,OAFQ;AAGjBC,EAAAA,eAAe,EAAE,kBAHA;AAIjBC,EAAAA,KAAK,EAAE,oBAJU;AAKjBC,EAAAA,MAAM,EAAE,EALS;AAMjBC,EAAAA,OAAO,EAAE,UANQ;AAOjBC,EAAAA,UAAU,EAAE,MAPK;AAQjBC,EAAAA,YAAY,EAAE,CARG;AASjBC,EAAAA,SAAS,EAAE,gCATM;AAUjBC,EAAAA,UAAU,EAAE,QAVK;AAWjBC,EAAAA,QAAQ,EAAE,EAXO;AAYjBC,EAAAA,UAAU,EAAE;AAZK,CAAnB;AAeA,MAAMC,KAAK,GAAG,OAAMA,KAApB;AAEA,eAAe,MAAMC,WAAN,SAA0BjC,SAA1B,CAAoC;AAAA;AAAA;AAAA,SACjDkC,KADiD,GACzC;AACN;AACAC,MAAAA,SAAS,EAAE,KAFL;AAIN;AACAC,MAAAA,SAAS,EAAE;AACT;AACAC,QAAAA,QAAQ,EAAE,EAFD;AAGT;AACAvB,QAAAA,KAAK,EAAE,EAJE;AAKT;AACAE,QAAAA,IAAI,EAAE,EANG;AAOT;AACAD,QAAAA,KAAK,EAAE,CARE;AAST;AACAuB,QAAAA,QAAQ,EAAE,EAVD;AAWT;AACAC,QAAAA,IAAI,EAAE,CAZG;AAaT;AACAC,QAAAA,QAAQ,EAAE,EAdD;AAeT;AACAC,QAAAA,KAAK,EAAE,EAhBE;AAiBT;AACAC,QAAAA,SAAS,EAAE,EAlBF;AAmBT;AACAC,QAAAA,KAAK,EAAE;AACLC,UAAAA,QAAQ,EAAE,WADL;AAELC,UAAAA,SAAS,EAAE;AAFN,SApBE;AAwBT;AACAC,QAAAA,UAAU,EAAE,EAzBH;AA0BT;AACAC,QAAAA,SAAS,EAAE,EA3BF;AA4BT;AACAC,QAAAA,WAAW,EAAE;AA7BJ,OALL;AAqCN;AACAC,MAAAA,UAAU,EAAE;AAtCN,KADyC;;AAAA,SA2EjDC,cA3EiD,GA2EhC,YAAY;AAC3B,YAAM;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,KAAX;AAAkBC,QAAAA;AAAlB,UAA+B,KAAKC,KAA1C;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKF,KAAjB;;AACA,UAAI,CAAC9C,MAAM,EAAX,EAAe;AACbwB,QAAAA,KAAK,CAAC,IAAD,EAAO,iBAAP,EAA0B,CAC7B;AAAEyB,UAAAA,IAAI,EAAE;AAAR,SAD6B,EAE7B;AACEA,UAAAA,IAAI,EAAE,KADR;AACeC,UAAAA,OAAO,EAAE,YAAY;AAChCP,YAAAA,OAAO,CAACQ,IAAR,CAAa,QAAb,EAAuB;AAAEC,cAAAA,OAAO,EAAEP,QAAQ,CAACQ;AAApB,aAAvB;AACD;AAHH,SAF6B,CAA1B,CAAL;AAQD,OATD,MASO;AACL,cAAM;AAAEZ,UAAAA;AAAF,YAAiB,KAAKf,KAA5B;AACA,cAAM;AAAEvB,UAAAA;AAAF,YAASyC,KAAK,CAACU,MAArB;;AACA,YAAIb,UAAJ,EAAgB;AACd;AACA,gBAAMc,GAAG,GAAG,MAAMxD,MAAM,CAACI,EAAD,CAAxB;AACAoD,UAAAA,GAAG,CAACC,MAAJ,KAAe,GAAf,IAAsB,KAAKC,QAAL,CAAc;AAClChB,YAAAA,UAAU,EAAE;AADsB,WAAd,CAAtB;AAGD,SAND,MAMO;AACL;AACA,gBAAMc,GAAG,GAAG,MAAMzD,MAAM,CAACK,EAAD,CAAxB;;AACA,cAAIoD,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB,iBAAKC,QAAL,CAAc;AACZhB,cAAAA,UAAU,EAAE;AADA,aAAd;AAGD,WAJD,MAIO;AACL,mBAAMiB,OAAN,CAAcH,GAAG,CAACf,WAAlB;AACD;AAEF;AACF;AACF,KA7GgD;;AAAA,SAgHjDmB,aAhHiD,GAgHjC,YAAY;AAC1B,UAAI,CAAC3D,MAAL,EAAa;AACb,YAAM;AAAEG,QAAAA;AAAF,UAAS,KAAK2C,KAAL,CAAWF,KAAX,CAAiBU,MAAhC;AACA,UAAIC,GAAG,GAAG,MAAM1D,WAAW,CAACM,EAAD,CAA3B;AACA4C,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAZ;;AACA,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB,aAAKC,QAAL,CAAc;AACZhB,UAAAA,UAAU,EAAEc,GAAG,CAACK,IAAJ,CAASnB;AADT,SAAd;AAGD;AACF,KA1HgD;AAAA;;AA0CjDoB,EAAAA,iBAAiB,GAAG;AAClB;AACA;AACA;AAEA;AACA,SAAKjE,cAAL;AACA,SAAK+D,aAAL;AACD;AAED;;;;;;;;;;;;;;;;;;;AAsBA;;;AAkDA;AACA,QAAM/D,cAAN,GAAuB;AACrBmD,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKF,KAAL,CAAWH,OAAvB;AACA,UAAM;AAAExC,MAAAA;AAAF,QAAS,KAAK2C,KAAL,CAAWF,KAAX,CAAiBU,MAAhC;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B7C,EAA7B,EAHqB,CAIrB;;AACA,SAAKsD,QAAL,CAAc;AACZ9B,MAAAA,SAAS,EAAE;AADC,KAAd,EALqB,CASrB;AACA;AACA;;AACA,UAAM4B,GAAG,GAAG,MAAM3D,cAAc,CAACO,EAAD,CAAhC,CAZqB,CAcrB;;AAEA,SAAKsD,QAAL,CAAc;AACZ7B,MAAAA,SAAS,EAAE2B,GAAG,CAACK,IADH;AAEZjC,MAAAA,SAAS,EAAE;AAFC,KAAd;AAKA,UAAM;AAAEO,MAAAA,SAAF;AAAaC,MAAAA;AAAb,QAAuBoB,GAAG,CAACK,IAAjC,CArBqB,CAuBrB;;AACA,SAAKE,SAAL,CAAe5B,SAAf,EAA0BC,KAA1B;AACD,GAtJgD,CAwJjD;;;AACA4B,EAAAA,aAAa,GAAG;AACd,UAAM;AACJnC,MAAAA,SAAS,EAAE;AAAEC,QAAAA;AAAF;AADP,QAEF,KAAKH,KAFT;AAIA,WAAOG,QAAQ,CAACmC,GAAT,CAAaC,IAAI,IACtB;AAAG,MAAA,GAAG,EAAEA,IAAR;AAAc,MAAA,IAAI,EAAC,kBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,GAAG,EAAEhE,QAAQ,GAAGgE,IAArB;AAA2B,MAAA,GAAG,EAAC,EAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADK,CAAP;AAKD,GAnKgD,CAqKjD;;;AACAH,EAAAA,SAAS,CAAC5B,SAAD,EAAYC,KAAZ,EAAmB;AAC1B,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAA0BF,KAAhC;AAEA,UAAM6B,GAAG,GAAG,IAAIvD,IAAI,CAACyD,GAAT,CAAa,KAAb,CAAZ;AACA,UAAMC,KAAK,GAAG,IAAI1D,IAAI,CAAC2D,KAAT,CAAe/B,SAAf,EAA0BD,QAA1B,CAAd;AACA4B,IAAAA,GAAG,CAACK,aAAJ,CAAkBF,KAAlB,EAAyB,EAAzB;AAEA,UAAMG,KAAK,GAAG,IAAI7D,IAAI,CAAC8D,KAAT,CAAe,EAAf,EAAmB;AAC/B3D,MAAAA,QAAQ,EAAEuD,KADqB;AAE/BK,MAAAA,MAAM,EAAE,IAAI/D,IAAI,CAACgE,IAAT,CAAc,CAAd,EAAiB,CAAC,EAAlB;AAFuB,KAAnB,CAAd;AAKAH,IAAAA,KAAK,CAACI,QAAN,CAAe/D,UAAf;AACA2D,IAAAA,KAAK,CAACK,UAAN,CAAkB;gBACNzC,SAAU;sBACJxC,MAAM,CAACkF,QAAS;OAFlC;AAIAZ,IAAAA,GAAG,CAACa,UAAJ,CAAeP,KAAf;AACD,GAxLgD,CA0LjD;;;AACAQ,EAAAA,UAAU,GAAG;AACX,UAAM;AACJlD,MAAAA,SAAS,EAAE;AAAEpB,QAAAA;AAAF;AADP,QAEF,KAAKkB,KAFT;AAIA,WAAOlB,IAAI,CAACwD,GAAL,CAAS,CAACC,IAAD,EAAOc,KAAP,KAAiB;AAC/B;AACA,UAAIC,QAAQ,GAAG,EAAf;;AACA,UAAID,KAAK,GAAG,CAAZ,EAAe;AACbC,QAAAA,QAAQ,GAAG,MAAX;AACD,OAFD,MAEO;AACLA,QAAAA,QAAQ,GAAG,SAASD,KAAK,GAAG,CAAjB,CAAX;AACD;;AAED,aACE;AAAM,QAAA,GAAG,EAAEd,IAAX;AAAiB,QAAA,SAAS,EAAE,CAACvE,MAAM,CAACuF,GAAR,EAAavF,MAAM,CAACsF,QAAD,CAAnB,EAA+BE,IAA/B,CAAoC,GAApC,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGjB,IADH,CADF;AAKD,KAdM,CAAP;AAeD;;AAEDkB,EAAAA,MAAM,GAAG;AACP,UAAM;AACJxD,MAAAA,SADI;AAEJC,MAAAA,SAAS,EAAE;AACTM,QAAAA,SAAS,GAAG,EADH;AAET5B,QAAAA,KAFS;AAGTC,QAAAA,KAHS;AAITuB,QAAAA,QAJS;AAKTC,QAAAA,IALS;AAMTE,QAAAA,KANS;AAOTD,QAAAA,QAPS;AAQTM,QAAAA,UARS;AASTE,QAAAA;AATS,OAFP;AAaJC,MAAAA;AAbI,QAcF,KAAKf,KAdT;AAeA,WACE;AAAK,MAAA,SAAS,EAAEhC,MAAM,CAAC0F,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAE;AAAM,QAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFR;AAGE,MAAA,WAAW,EAAE,MAAM,KAAKtC,KAAL,CAAWH,OAAX,CAAmB0C,EAAnB,CAAsB,CAAC,CAAvB,CAHrB;AAIE,MAAA,YAAY,EAAE,CAAC;AAAG,QAAA,GAAG,EAAC,OAAP;AAAe,QAAA,SAAS,EAAC,qBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAD,CAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAFF,EAWE;AAAK,MAAA,SAAS,EAAE3F,MAAM,CAAC4F,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAAC3D,SAAD,GACC;AAAU,MAAA,QAAQ,MAAlB;AAAmB,MAAA,QAAQ,MAA3B;AAA4B,MAAA,gBAAgB,EAAE,IAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKoC,aAAL,EADH,CADD,GAKG,EANN,CAXF,EAqBE;AAAK,MAAA,SAAS,EAAErE,MAAM,CAAC6F,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAE7F,MAAM,CAAC8F,SAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAkClF,KAAlC,CADF,EAEE;AAAM,MAAA,SAAS,EAAEZ,MAAM,CAACc,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,0BAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAY,KAAKsE,UAAL,EAAZ,CADF,CAFF,EAME;AAAM,MAAA,SAAS,EAAEpF,MAAM,CAAC+F,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,0BAAM,IAAN;AAAW,MAAA,SAAS,EAAE/F,MAAM,CAACgG,aAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGnF,KADH,EAEE;AAAM,MAAA,SAAS,EAAEb,MAAM,CAACiG,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,CADF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF,CADF,EAQE,0BAAM,IAAN;AAAW,MAAA,SAAS,EAAEjG,MAAM,CAACgG,aAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAM5D,QAAN,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF,CARF,EAYE,0BAAM,IAAN;AAAW,MAAA,SAAS,EAAEpC,MAAM,CAACgG,aAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAM3D,IAAN,iBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF,CAZF,CANF,EAwBE;AAAM,MAAA,SAAS,EAAErC,MAAM,CAACkG,SAAxB;AAAmC,MAAA,KAAK,EAAC,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,0BAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,SAAS,EAAElG,MAAM,CAACY,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,iBADF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,SAAS,EAAEZ,MAAM,CAACY,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAEG2B,KAFH,CALF,CADF,EAWE,0BAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,SAAS,EAAEvC,MAAM,CAACY,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAEG0B,QAAQ,CAACkD,IAAT,CAAc,GAAd,CAFH,CADF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,SAAS,EAAExF,MAAM,CAACY,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,6BALF,CAXF,CAxBF,CArBF,EAoEE;AAAK,MAAA,SAAS,EAAEZ,MAAM,CAACsE,GAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAEtE,MAAM,CAACmG,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAO3D,SAAP,CAFF,CADF,EAKE;AAAK,MAAA,SAAS,EAAExC,MAAM,CAACoG,YAAvB;AAAqC,MAAA,EAAE,EAAC,KAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF,CApEF,EA8EE;AAAK,MAAA,SAAS,EAAEpG,MAAM,CAACqG,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAErG,MAAM,CAACsG,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAKG1D,UAAU,CAAC2D,MAAX,KAAsB,CAAtB,GACC;AAAK,MAAA,SAAS,EAAEvG,MAAM,CAACwG,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADD,GAGG,oBAAC,YAAD;AAAc,MAAA,IAAI,EAAE5D,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARN,CA9EF,EA0FE;AAAK,MAAA,SAAS,EAAE5C,MAAM,CAACyG,GAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAEzG,MAAM,CAACsG,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAEtG,MAAM,CAAC0G,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAE1G,MAAM,CAAC2G,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,GAAG,EAAEpG,QAAQ,GAAG,iBAArB;AAAwC,MAAA,GAAG,EAAC,cAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAK,MAAA,SAAS,EAAEP,MAAM,CAAC4G,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADF,EAEE;AAAK,MAAA,SAAS,EAAE5G,MAAM,CAAC6G,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,mCAFF,CAFF,CADF,EAWE;AAAM,MAAA,SAAS,EAAE7G,MAAM,CAAC8G,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAXF,CADF,EAeE;AAAK,MAAA,SAAS,EAAE9G,MAAM,CAAC+G,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGjE,WAAW,IAAI,QADlB,CAfF,CAFF,CA1FF,EAiHE;AAAK,MAAA,SAAS,EAAE9C,MAAM,CAACgH,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAEhH,MAAM,CAACsG,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAEE;AAAK,MAAA,SAAS,EAAEtG,MAAM,CAACiH,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGzG,eAAe,CAAC8D,GAAhB,CAAoBC,IAAI,IACvB,oBAAC,SAAD,oBAAeA,IAAf;AAAqB,MAAA,GAAG,EAAEA,IAAI,CAAC9D,EAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADD,CADH,CAFF,CAjHF,EA0HE;AAAM,MAAA,SAAS,EAAET,MAAM,CAACkH,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,0BAAM,IAAN;AAAW,MAAA,OAAO,EAAE,KAAKlE,cAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,GAAG,EACDzC,QAAQ,IAAIwC,UAAU,GAAG,eAAH,GAAqB,iBAAnC,CAFZ;AAIE,MAAA,SAAS,EAAE/C,MAAM,CAACmH,WAJpB;AAKE,MAAA,GAAG,EAAC,cALN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAQE;AAAM,MAAA,SAAS,EAAEnH,MAAM,CAACoH,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGrE,UAAU,GAAG,KAAH,GAAW,IADxB,CARF,CADF,EAaE,0BAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAbF,EAcE,0BAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAG,MAAA,IAAI,EAAC,kBAAR;AAA2B,MAAA,SAAS,EAAE/C,MAAM,CAACqH,SAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,CAdF,CA1HF,CADF;AAiJD;;AAlXgD","sourcesContent":["import React, { Component } from 'react'\r\nimport { Carousel, Flex, Modal, Toast, NavBar, Icon } from 'antd-mobile'\r\n// import axios from 'axios'\r\nimport HouseItem from '../HouseItem'\r\nimport styles from './index.module.css'\r\nimport HousePackage from '../HousePackage'\r\nimport { getHouseDetail, getHouseFav, addFav, delFav } from '../../utils/api/house'\r\nimport { isAuth } from '../../utils'\r\nconst BASE_URL = `http://localhost:8080`\r\n// 猜你喜欢\r\nconst recommendHouses = [\r\n  {\r\n    id: 1,\r\n    src: BASE_URL + '/img/message/1.png',\r\n    desc: '72.32㎡/南 北/低楼层',\r\n    title: '安贞西里 3室1厅',\r\n    price: 4500,\r\n    tags: ['随时看房']\r\n  },\r\n  {\r\n    id: 2,\r\n    src: BASE_URL + '/img/message/2.png',\r\n    desc: '83㎡/南/高楼层',\r\n    title: '天居园 2室1厅',\r\n    price: 7200,\r\n    tags: ['近地铁']\r\n  },\r\n  {\r\n    id: 3,\r\n    src: BASE_URL + '/img/message/3.png',\r\n    desc: '52㎡/西南/低楼层',\r\n    title: '角门甲4号院 1室1厅',\r\n    price: 4300,\r\n    tags: ['集中供暖']\r\n  }\r\n]\r\n\r\n// 百度地图\r\nconst BMap = window.BMap\r\n\r\nconst labelStyle = {\r\n  position: 'absolute',\r\n  zIndex: -7982820,\r\n  backgroundColor: 'rgb(238, 93, 91)',\r\n  color: 'rgb(255, 255, 255)',\r\n  height: 25,\r\n  padding: '5px 10px',\r\n  lineHeight: '14px',\r\n  borderRadius: 3,\r\n  boxShadow: 'rgb(204, 204, 204) 2px 2px 2px',\r\n  whiteSpace: 'nowrap',\r\n  fontSize: 12,\r\n  userSelect: 'none'\r\n}\r\n\r\nconst alert = Modal.alert\r\n\r\nexport default class HouseDetail extends Component {\r\n  state = {\r\n    // 数据加载中状态\r\n    isLoading: false,\r\n\r\n    // 房屋详情\r\n    houseInfo: {\r\n      // 房屋图片\r\n      houseImg: [],\r\n      // 标题\r\n      title: '',\r\n      // 标签\r\n      tags: [],\r\n      // 租金\r\n      price: 0,\r\n      // 房型\r\n      roomType: '',\r\n      // 房屋面积\r\n      size: 0,\r\n      // 朝向\r\n      oriented: [],\r\n      // 楼层\r\n      floor: '',\r\n      // 小区名称\r\n      community: '',\r\n      // 地理位置\r\n      coord: {\r\n        latitude: '39.928033',\r\n        longitude: '116.529466'\r\n      },\r\n      // 房屋配套\r\n      supporting: [],\r\n      // 房屋标识\r\n      houseCode: '',\r\n      // 房屋描述\r\n      description: ''\r\n    },\r\n\r\n    // 表示房源是否收藏\r\n    isFavorite: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    // 获取配置好的路由参数：\r\n    // console.log('路由参数对象：', this.props.match.params)\r\n    // console.log(this.props)\r\n\r\n    // 获取房屋数据\r\n    this.getHouseDetail();\r\n    this.checkHouseFav()\r\n  }\r\n\r\n  /* \r\n      收藏房源：\r\n\r\n      1 给收藏按钮绑定单击事件，创建方法 handleFavorite 作为事件处理程序。\r\n      2 调用 isAuth 方法，判断是否登录。\r\n      3 如果未登录，则使用 Modal.alert 提示用户是否去登录。\r\n      4 如果点击取消，则不做任何操作。\r\n      5 如果点击去登录，就跳转到登录页面，同时传递 state（登录后，再回到房源收藏页面）。\r\n      \r\n      6 根据 isFavorite 判断，当前房源是否收藏。\r\n      7 如果未收藏，就调用添加收藏接口，添加收藏。\r\n      8 如果已收藏，就调用删除收藏接口，去除收藏。\r\n\r\n      alert('提示', '登录后才能收藏房源，是否去登录?', [\r\n        { text: '取消' },\r\n        {\r\n          text: '去登录',\r\n          onPress: () => {}\r\n        }\r\n      ])\r\n    */\r\n\r\n  // 处理收藏\r\n  handleFavorite = async () => {\r\n    const { history, match, location } = this.props;\r\n    console.log(this.props)\r\n    if (!isAuth()) {\r\n      alert('提示', '登录后才能收藏房源，是否登录？', [\r\n        { text: '取消' },\r\n        {\r\n          text: '去登录', onPress: async () => {\r\n            history.push('/login', { backUrl: location.pathname })\r\n          }\r\n        }\r\n      ])\r\n    } else {\r\n      const { isFavorite } = this.state;\r\n      const { id } = match.params;\r\n      if (isFavorite) {\r\n        // 删除收藏\r\n        const res = await delFav(id);\r\n        res.status === 200 && this.setState({\r\n          isFavorite: false\r\n        })\r\n      } else {\r\n        // 添加收藏\r\n        const res = await addFav(id);\r\n        if (res.status === 200) {\r\n          this.setState({\r\n            isFavorite: true\r\n          })\r\n        } else {\r\n          Toast.offline(res.description)\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  // 检查房子是否收藏过\r\n  checkHouseFav = async () => {\r\n    if (!isAuth) return;\r\n    const { id } = this.props.match.params;\r\n    let res = await getHouseFav(id);\r\n    console.log(res)\r\n    if (res.status === 200) {\r\n      this.setState({\r\n        isFavorite: res.data.isFavorite\r\n      })\r\n    }\r\n  }\r\n\r\n  // 获取房屋详细信息\r\n  async getHouseDetail() {\r\n    console.log(this.props.history)\r\n    const { id } = this.props.match.params\r\n    console.log('get house id:', id);\r\n    // 开启loading\r\n    this.setState({\r\n      isLoading: true\r\n    })\r\n\r\n    // const res = await axios.get(\r\n    //   `http://localhost:8080/houses/5cc47c8d1439630e5b47d45d`\r\n    // )\r\n    const res = await getHouseDetail(id)\r\n\r\n    // console.log(res.data.body)\r\n\r\n    this.setState({\r\n      houseInfo: res.data,\r\n      isLoading: false\r\n    })\r\n\r\n    const { community, coord } = res.data;\r\n\r\n    // 渲染地图\r\n    this.renderMap(community, coord)\r\n  }\r\n\r\n  // 渲染轮播图结构\r\n  renderSwipers() {\r\n    const {\r\n      houseInfo: { houseImg }\r\n    } = this.state\r\n\r\n    return houseImg.map(item => (\r\n      <a key={item} href=\"http://itcast.cn\">\r\n        <img src={BASE_URL + item} alt=\"\" />\r\n      </a>\r\n    ))\r\n  }\r\n\r\n  // 渲染地图\r\n  renderMap(community, coord) {\r\n    const { latitude, longitude } = coord\r\n\r\n    const map = new BMap.Map('map')\r\n    const point = new BMap.Point(longitude, latitude)\r\n    map.centerAndZoom(point, 17)\r\n\r\n    const label = new BMap.Label('', {\r\n      position: point,\r\n      offset: new BMap.Size(0, -36)\r\n    })\r\n\r\n    label.setStyle(labelStyle)\r\n    label.setContent(`\r\n        <span>${community}</span>\r\n        <div class=\"${styles.mapArrow}\"></div>\r\n      `)\r\n    map.addOverlay(label)\r\n  }\r\n\r\n  // 渲染标签\r\n  renderTags() {\r\n    const {\r\n      houseInfo: { tags }\r\n    } = this.state\r\n\r\n    return tags.map((item, index) => {\r\n      // 如果标签数量超过3个，后面的标签就都展示位第三个标签的样式\r\n      let tagClass = ''\r\n      if (index > 2) {\r\n        tagClass = 'tag3'\r\n      } else {\r\n        tagClass = 'tag' + (index + 1)\r\n      }\r\n\r\n      return (\r\n        <span key={item} className={[styles.tag, styles[tagClass]].join(' ')}>\r\n          {item}\r\n        </span>\r\n      )\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      isLoading,\r\n      houseInfo: {\r\n        community = '',\r\n        title,\r\n        price,\r\n        roomType,\r\n        size,\r\n        floor,\r\n        oriented,\r\n        supporting,\r\n        description\r\n      },\r\n      isFavorite\r\n    } = this.state\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 导航栏 */}\r\n        <NavBar\r\n          mode=\"dark\"\r\n          icon={<Icon type=\"left\" />}\r\n          onLeftClick={() => this.props.history.go(-1)}\r\n          rightContent={[<i key=\"share\" className=\"iconfont icon-share\" />]}\r\n        >\r\n          房屋详情\r\n        </NavBar>\r\n        {/* 轮播图 */}\r\n        <div className={styles.slides}>\r\n          {!isLoading ? (\r\n            <Carousel autoplay infinite autoplayInterval={5000}>\r\n              {this.renderSwipers()}\r\n            </Carousel>\r\n          ) : (\r\n              ''\r\n            )}\r\n        </div>\r\n        {/* 房屋基础信息 */}\r\n        <div className={styles.info}>\r\n          <h3 className={styles.infoTitle}>{title}</h3>\r\n          <Flex className={styles.tags}>\r\n            <Flex.Item>{this.renderTags()}</Flex.Item>\r\n          </Flex>\r\n\r\n          <Flex className={styles.infoPrice}>\r\n            <Flex.Item className={styles.infoPriceItem}>\r\n              <div>\r\n                {price}\r\n                <span className={styles.month}>/月</span>\r\n              </div>\r\n              <div>租金</div>\r\n            </Flex.Item>\r\n            <Flex.Item className={styles.infoPriceItem}>\r\n              <div>{roomType}</div>\r\n              <div>房型</div>\r\n            </Flex.Item>\r\n            <Flex.Item className={styles.infoPriceItem}>\r\n              <div>{size}平米</div>\r\n              <div>面积</div>\r\n            </Flex.Item>\r\n          </Flex>\r\n\r\n          <Flex className={styles.infoBasic} align=\"start\">\r\n            <Flex.Item>\r\n              <div>\r\n                <span className={styles.title}>装修：</span>\r\n                精装\r\n              </div>\r\n              <div>\r\n                <span className={styles.title}>楼层：</span>\r\n                {floor}\r\n              </div>\r\n            </Flex.Item>\r\n            <Flex.Item>\r\n              <div>\r\n                <span className={styles.title}>朝向：</span>\r\n                {oriented.join('、')}\r\n              </div>\r\n              <div>\r\n                <span className={styles.title}>类型：</span>普通住宅\r\n              </div>\r\n            </Flex.Item>\r\n          </Flex>\r\n        </div>\r\n        {/* 地图位置 */}\r\n        <div className={styles.map}>\r\n          <div className={styles.mapTitle}>\r\n            小区：\r\n            <span>{community}</span>\r\n          </div>\r\n          <div className={styles.mapContainer} id=\"map\">\r\n            地图\r\n          </div>\r\n        </div>\r\n        {/* 房屋配套 */}\r\n        <div className={styles.about}>\r\n          <div className={styles.houseTitle}>房屋配套</div>\r\n          {/* <HousePackage list={supporting} /> */}\r\n          {/* <div className=\"title-empty\">暂无数据</div> */}\r\n\r\n          {supporting.length === 0 ? (\r\n            <div className={styles.titleEmpty}>暂无数据</div>\r\n          ) : (\r\n              <HousePackage list={supporting} />\r\n            )}\r\n        </div>\r\n        {/* 房屋概况 */}\r\n        <div className={styles.set}>\r\n          <div className={styles.houseTitle}>房源概况</div>\r\n          <div>\r\n            <div className={styles.contact}>\r\n              <div className={styles.user}>\r\n                <img src={BASE_URL + '/img/avatar.png'} alt=\"头像\" />\r\n                <div className={styles.useInfo}>\r\n                  <div>王女士</div>\r\n                  <div className={styles.userAuth}>\r\n                    <i className=\"iconfont icon-auth\" />\r\n                    已认证房主\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <span className={styles.userMsg}>发消息</span>\r\n            </div>\r\n\r\n            <div className={styles.descText}>\r\n              {description || '暂无房屋描述'}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* 推荐 */}\r\n        <div className={styles.recommend}>\r\n          <div className={styles.houseTitle}>猜你喜欢</div>\r\n          <div className={styles.items}>\r\n            {recommendHouses.map(item => (\r\n              <HouseItem {...item} key={item.id} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n        {/* 底部收藏按钮 */}\r\n        <Flex className={styles.fixedBottom}>\r\n          <Flex.Item onClick={this.handleFavorite}>\r\n            <img\r\n              src={\r\n                BASE_URL + (isFavorite ? '/img/star.png' : '/img/unstar.png')\r\n              }\r\n              className={styles.favoriteImg}\r\n              alt=\"收藏\"\r\n            />\r\n            <span className={styles.favorite}>\r\n              {isFavorite ? '已收藏' : '收藏'}\r\n            </span>\r\n          </Flex.Item>\r\n          <Flex.Item>在线咨询</Flex.Item>\r\n          <Flex.Item>\r\n            <a href=\"tel:400-618-4000\" className={styles.telephone}>\r\n              电话预约\r\n            </a>\r\n          </Flex.Item>\r\n        </Flex>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}