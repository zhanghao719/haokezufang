{"ast":null,"code":"import \"antd-mobile/lib/search-bar/style/css\";\nimport _SearchBar from \"antd-mobile/lib/search-bar\";\nvar _jsxFileName = \"F:\\\\\\u767E\\u5EA6\\u4E91\\u4E0B\\u8F7D\\\\React\\\\hkzf\\\\haokezufang\\\\src\\\\pages\\\\Rent\\\\Search\\\\index.js\";\nimport React, { Component } from 'react';\nimport { getCurrCity } from '../../../utils';\nimport styles from './index.module.css';\nimport { getCommunity } from '../../../utils/api/city';\nexport default class Search extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      // 搜索框的值\n      searchTxt: '',\n      tipsList: []\n    };\n\n    this.handlerSearch = async v => {\n      v = v.trim();\n\n      if (v.length === 0) {\n        return this.setState({\n          searchTxt: '',\n          tipsList: []\n        });\n      }\n\n      this.setState({\n        searchTxt: v\n      }); // 获取小区列表\n\n      const res = await getCommunity(v, this.cityId);\n\n      if (res.status === 200) {\n        this.setState({\n          tipsList: res.data\n        });\n      }\n    };\n\n    this.selectCom = item => {\n      this.props.history.replace('/rent/add', {\n        id: item.community,\n        name: item.communityName\n      });\n    };\n\n    this.renderTips = () => {\n      const {\n        tipsList\n      } = this.state;\n      return tipsList.map(item => React.createElement(\"li\", {\n        onClick: () => this.selectCom(item),\n        key: item.community,\n        className: styles.tip,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, item.communityName));\n    };\n  }\n\n  async componentDidMount() {\n    // 获取城市ID\n    const {\n      value\n    } = await getCurrCity();\n    this.cityId = value;\n  } // 搜索小区\n\n\n  render() {\n    const {\n      history\n    } = this.props;\n    const {\n      searchTxt\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: styles.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(_SearchBar, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u5C0F\\u533A\\u6216\\u5730\\u5740\",\n      value: searchTxt,\n      onChange: this.handlerSearch,\n      showCancelButton: true,\n      onCancel: () => history.replace('/rent/add'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(\"ul\", {\n      className: styles.tips,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.renderTips()));\n  }\n\n}","map":{"version":3,"sources":["F:/百度云下载/React/hkzf/haokezufang/src/pages/Rent/Search/index.js"],"names":["React","Component","getCurrCity","styles","getCommunity","Search","state","searchTxt","tipsList","handlerSearch","v","trim","length","setState","res","cityId","status","data","selectCom","item","props","history","replace","id","community","name","communityName","renderTips","map","tip","componentDidMount","value","render","root","tips"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAIA,SAASC,WAAT,QAA4B,gBAA5B;AAEA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,SAASC,YAAT,QAA6B,yBAA7B;AAEA,eAAe,MAAMC,MAAN,SAAqBJ,SAArB,CAA+B;AAAA;AAAA;AAAA,SAE5CK,KAF4C,GAEpC;AACN;AACAC,MAAAA,SAAS,EAAE,EAFL;AAGNC,MAAAA,QAAQ,EAAE;AAHJ,KAFoC;;AAAA,SAe5CC,aAf4C,GAe5B,MAAOC,CAAP,IAAa;AAC3BA,MAAAA,CAAC,GAAGA,CAAC,CAACC,IAAF,EAAJ;;AACA,UAAID,CAAC,CAACE,MAAF,KAAa,CAAjB,EAAoB;AAClB,eAAO,KAAKC,QAAL,CAAc;AACnBN,UAAAA,SAAS,EAAE,EADQ;AAEnBC,UAAAA,QAAQ,EAAE;AAFS,SAAd,CAAP;AAID;;AACD,WAAKK,QAAL,CAAc;AACZN,QAAAA,SAAS,EAAEG;AADC,OAAd,EAR2B,CAW3B;;AACA,YAAMI,GAAG,GAAG,MAAMV,YAAY,CAACM,CAAD,EAAI,KAAKK,MAAT,CAA9B;;AACA,UAAID,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;AACtB,aAAKH,QAAL,CAAc;AACZL,UAAAA,QAAQ,EAAEM,GAAG,CAACG;AADF,SAAd;AAGD;AACF,KAjC2C;;AAAA,SAoC5CC,SApC4C,GAoC/BC,IAAD,IAAU;AACpB,WAAKC,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2B,WAA3B,EAAwC;AAAEC,QAAAA,EAAE,EAAEJ,IAAI,CAACK,SAAX;AAAsBC,QAAAA,IAAI,EAAEN,IAAI,CAACO;AAAjC,OAAxC;AACD,KAtC2C;;AAAA,SAyC5CC,UAzC4C,GAyC/B,MAAM;AACjB,YAAM;AAAEnB,QAAAA;AAAF,UAAe,KAAKF,KAA1B;AAEA,aAAOE,QAAQ,CAACoB,GAAT,CAAaT,IAAI,IACtB;AAAI,QAAA,OAAO,EAAE,MAAM,KAAKD,SAAL,CAAeC,IAAf,CAAnB;AAAyC,QAAA,GAAG,EAAEA,IAAI,CAACK,SAAnD;AAA8D,QAAA,SAAS,EAAErB,MAAM,CAAC0B,GAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGV,IAAI,CAACO,aADR,CADK,CAAP;AAKD,KAjD2C;AAAA;;AAQ5C,QAAMI,iBAAN,GAA0B;AACxB;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAY,MAAM7B,WAAW,EAAnC;AACA,SAAKa,MAAL,GAAcgB,KAAd;AACD,GAZ2C,CAc5C;;;AAqCAC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEX,MAAAA;AAAF,QAAc,KAAKD,KAAzB;AACA,UAAM;AAAEb,MAAAA;AAAF,QAAgB,KAAKD,KAA3B;AAEA,WACE;AAAK,MAAA,SAAS,EAAEH,MAAM,CAAC8B,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE;AACE,MAAA,WAAW,EAAC,kDADd;AAEE,MAAA,KAAK,EAAE1B,SAFT;AAGE,MAAA,QAAQ,EAAE,KAAKE,aAHjB;AAIE,MAAA,gBAAgB,EAAE,IAJpB;AAKE,MAAA,QAAQ,EAAE,MAAMY,OAAO,CAACC,OAAR,CAAgB,WAAhB,CALlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAWE;AAAI,MAAA,SAAS,EAAEnB,MAAM,CAAC+B,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6B,KAAKP,UAAL,EAA7B,CAXF,CADF;AAeD;;AAtE2C","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport { SearchBar } from 'antd-mobile'\r\n\r\nimport { getCurrCity } from '../../../utils'\r\n\r\nimport styles from './index.module.css'\r\nimport { getCommunity } from '../../../utils/api/city'\r\n\r\nexport default class Search extends Component {\r\n\r\n  state = {\r\n    // 搜索框的值\r\n    searchTxt: '',\r\n    tipsList: []\r\n  }\r\n\r\n  async componentDidMount() {\r\n    // 获取城市ID\r\n    const { value } = await getCurrCity();\r\n    this.cityId = value;\r\n  }\r\n\r\n  // 搜索小区\r\n  handlerSearch = async (v) => {\r\n    v = v.trim();\r\n    if (v.length === 0) {\r\n      return this.setState({\r\n        searchTxt: '',\r\n        tipsList: []\r\n      })\r\n    }\r\n    this.setState({\r\n      searchTxt: v\r\n    })\r\n    // 获取小区列表\r\n    const res = await getCommunity(v, this.cityId);\r\n    if (res.status === 200) {\r\n      this.setState({\r\n        tipsList: res.data\r\n      })\r\n    }\r\n  }\r\n\r\n  // 选择小区回传\r\n  selectCom = (item) => {\r\n    this.props.history.replace('/rent/add', { id: item.community, name: item.communityName })\r\n  }\r\n\r\n  // 渲染搜索结果列表\r\n  renderTips = () => {\r\n    const { tipsList } = this.state\r\n\r\n    return tipsList.map(item => (\r\n      <li onClick={() => this.selectCom(item)} key={item.community} className={styles.tip}>\r\n        {item.communityName}\r\n      </li>\r\n    ))\r\n  }\r\n\r\n  render() {\r\n    const { history } = this.props\r\n    const { searchTxt } = this.state\r\n\r\n    return (\r\n      <div className={styles.root}>\r\n        {/* 搜索框 */}\r\n        <SearchBar\r\n          placeholder=\"请输入小区或地址\"\r\n          value={searchTxt}\r\n          onChange={this.handlerSearch}\r\n          showCancelButton={true}\r\n          onCancel={() => history.replace('/rent/add')}\r\n        />\r\n\r\n        {/* 搜索提示列表 */}\r\n        <ul className={styles.tips}>{this.renderTips()}</ul>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}