{"ast":null,"code":"import \"antd-mobile/lib/nav-bar/style/css\";\nimport _NavBar from \"antd-mobile/lib/nav-bar\";\nimport \"antd-mobile/lib/icon/style/css\";\nimport _Icon from \"antd-mobile/lib/icon\";\nvar _jsxFileName = \"F:\\\\\\u767E\\u5EA6\\u4E91\\u4E0B\\u8F7D\\\\React\\\\hkzf\\\\haokezufang\\\\src\\\\pages\\\\Rent\\\\index.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getUserHouses } from '../../utils/api/user';\nimport HouseItem from '../../components/HouseItem';\nimport NoHouse from '../../components/NoHouse';\nimport styles from './index.module.css';\nimport { BASE_URL } from '../../utils/axios'; // 定义用户发布房源的API\n// 获取已发布房源 \n// export const getUserHouses = () => {\n//   return axios.get('/user/houses')\n// }\n\nexport default class Rent extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      // 出租房屋列表\n      list: []\n    };\n  }\n\n  // 获取已发布房源的列表数据\n  async getHouseList() {\n    const res = await getUserHouses();\n    const {\n      status,\n      data\n    } = res;\n\n    if (status === 200) {\n      this.setState({\n        list: data\n      });\n    } else {\n      const {\n        history\n      } = this.props;\n      history.replace('/login');\n    }\n  }\n\n  componentDidMount() {\n    this.getHouseList();\n  }\n\n  renderHouseItem() {\n    const {\n      list\n    } = this.state;\n    const {\n      history\n    } = this.props; // console.log(list, history)\n\n    return list.map(item => {\n      return React.createElement(HouseItem, {\n        key: item.houseCode,\n        onClick: () => {\n          history.push(`/detail/${item.houseCode}`);\n        },\n        src: BASE_URL + item.houseImg,\n        title: item.title,\n        desc: item.desc,\n        tags: item.tags,\n        price: item.price,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      });\n    });\n  }\n\n  renderRentList() {\n    const {\n      list\n    } = this.state;\n    const hasHouses = list.length > 0;\n\n    if (!hasHouses) {\n      return React.createElement(NoHouse, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"\\u60A8\\u8FD8\\u6CA1\\u6709\\u623F\\u6E90\\uFF0C\", React.createElement(Link, {\n        to: \"/rent/add\",\n        className: styles.link,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"\\u53BB\\u53D1\\u5E03\\u623F\\u6E90\"), \"\\u5427~\");\n    }\n\n    return React.createElement(\"div\", {\n      className: styles.houses,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, this.renderHouseItem());\n  }\n\n  render() {\n    const {\n      history\n    } = this.props;\n    return React.createElement(\"div\", {\n      className: styles.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(_NavBar, {\n      className: styles.navHeader,\n      mode: \"dark\",\n      icon: React.createElement(_Icon, {\n        type: \"left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }),\n      onLeftClick: () => history.go(-1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"\\u623F\\u5C4B\\u7BA1\\u7406\"), this.renderRentList());\n  }\n\n}","map":{"version":3,"sources":["F:/百度云下载/React/hkzf/haokezufang/src/pages/Rent/index.js"],"names":["React","Component","Link","getUserHouses","HouseItem","NoHouse","styles","BASE_URL","Rent","state","list","getHouseList","res","status","data","setState","history","props","replace","componentDidMount","renderHouseItem","map","item","houseCode","push","houseImg","title","desc","tags","price","renderRentList","hasHouses","length","link","houses","render","root","navHeader","go"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { NavBar, Icon } from 'antd-mobile'\r\n\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { getUserHouses } from '../../utils/api/user'\r\nimport HouseItem from '../../components/HouseItem'\r\nimport NoHouse from '../../components/NoHouse'\r\n\r\nimport styles from './index.module.css'\r\nimport { BASE_URL } from '../../utils/axios'\r\n\r\n// 定义用户发布房源的API\r\n// 获取已发布房源 \r\n// export const getUserHouses = () => {\r\n//   return axios.get('/user/houses')\r\n// }\r\n\r\nexport default class Rent extends Component {\r\n  state = {\r\n    // 出租房屋列表\r\n    list: []\r\n  }\r\n\r\n  // 获取已发布房源的列表数据\r\n  async getHouseList() {\r\n    const res = await getUserHouses()\r\n\r\n    const { status, data } = res\r\n    if (status === 200) {\r\n      this.setState({\r\n        list: data\r\n      })\r\n    } else {\r\n      const { history } = this.props\r\n      history.replace('/login')\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getHouseList()\r\n  }\r\n\r\n  renderHouseItem() {\r\n    const { list } = this.state\r\n    const { history } = this.props\r\n\r\n    // console.log(list, history)\r\n\r\n    return list.map(item => {\r\n      return (\r\n        <HouseItem\r\n          key={item.houseCode}\r\n          onClick={() => {\r\n            history.push(`/detail/${item.houseCode}`)\r\n          }}\r\n          src={BASE_URL + item.houseImg}\r\n          title={item.title}\r\n          desc={item.desc}\r\n          tags={item.tags}\r\n          price={item.price}\r\n        />\r\n      )\r\n    })\r\n  }\r\n\r\n  renderRentList() {\r\n    const { list } = this.state\r\n    const hasHouses = list.length > 0\r\n\r\n    if (!hasHouses) {\r\n      return (\r\n        <NoHouse>\r\n          您还没有房源，\r\n          <Link to=\"/rent/add\" className={styles.link}>\r\n            去发布房源\r\n          </Link>\r\n          吧~\r\n        </NoHouse>\r\n      )\r\n    }\r\n\r\n    return <div className={styles.houses}>{this.renderHouseItem()}</div>\r\n  }\r\n\r\n  render() {\r\n    const { history } = this.props\r\n\r\n    return (\r\n      <div className={styles.root}>\r\n        <NavBar\r\n          className={styles.navHeader}\r\n          mode=\"dark\"\r\n          icon={<Icon type=\"left\" />}\r\n          onLeftClick={() => history.go(-1)}\r\n        >\r\n          房屋管理\r\n        </NavBar>\r\n        {this.renderRentList()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}