{"ast":null,"code":"var _jsxFileName = \"F:\\\\\\u767E\\u5EA6\\u4E91\\u4E0B\\u8F7D\\\\React\\\\hkzf\\\\haokezufang\\\\src\\\\pages\\\\CityList\\\\index.js\";\n\n/**\r\n * 城市列表\r\n */\nimport React, { Component } from 'react';\nimport { getCityList } from '../../utils/api/city';\n\nclass CityList extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getCityData = async () => {\n      const {\n        status,\n        data\n      } = await getCityList();\n      console.log('城市列表数据：', data);\n\n      if (status === 200) {\n        const {\n          cityIndex,\n          cityList\n        } = this.formatCities(data);\n        console.log('按拼音首字母归类完的数据：', cityIndex, cityList);\n      }\n    };\n\n    this.formatCities = data => {\n      // 城市归类的对象\n      let cityList = {},\n          cityIndex = [];\n      data.forEach(item => {\n        // 数组排重\n        // 截取城市的拼音首字母\n        let cfirst = item.short.slice(0, 1); // 按首字母归类\n\n        if (!cityList[cfirst]) {\n          // 没有这个首字母的key（城市）\n          cityList[cfirst] = [item];\n        } else {\n          // 对象里边已经包含这个首字母,新增=>按拼音首字母归类城市\n          cityList[cfirst].push(item);\n        }\n      }); // 取出所有的拼音首字母=》[]\n\n      cityIndex = Object.keys(cityList).sort();\n      return {\n        cityIndex,\n        cityList\n      };\n    };\n  }\n\n  componentDidMount() {\n    this.getCityData();\n  } // 获取城市列表数据\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"CityList\");\n  }\n\n}\n\nexport default CityList;","map":{"version":3,"sources":["F:/百度云下载/React/hkzf/haokezufang/src/pages/CityList/index.js"],"names":["React","Component","getCityList","CityList","getCityData","status","data","console","log","cityIndex","cityList","formatCities","forEach","item","cfirst","short","slice","push","Object","keys","sort","componentDidMount","render"],"mappings":";;AAAA;;;AAGA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,sBAA5B;;AAGA,MAAMC,QAAN,SAAuBF,SAAvB,CAAiC;AAAA;AAAA;;AAAA,SAU/BG,WAV+B,GAUjB,YAAY;AACxB,YAAM;AAAEC,QAAAA,MAAF;AAAUC,QAAAA;AAAV,UAAmB,MAAMJ,WAAW,EAA1C;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,IAAvB;;AACA,UAAID,MAAM,KAAK,GAAf,EAAoB;AAClB,cAAM;AAAEI,UAAAA,SAAF;AAAaC,UAAAA;AAAb,YAA0B,KAAKC,YAAL,CAAkBL,IAAlB,CAAhC;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BC,SAA7B,EAAwCC,QAAxC;AAED;AAEF,KAnB8B;;AAAA,SA4B/BC,YA5B+B,GA4BfL,IAAD,IAAU;AACvB;AACA,UAAII,QAAQ,GAAG,EAAf;AAAA,UAAmBD,SAAS,GAAG,EAA/B;AACAH,MAAAA,IAAI,CAACM,OAAL,CAAcC,IAAD,IAAU;AACrB;AACA;AACA,YAAIC,MAAM,GAAGD,IAAI,CAACE,KAAL,CAAWC,KAAX,CAAiB,CAAjB,EAAoB,CAApB,CAAb,CAHqB,CAIrB;;AACA,YAAI,CAACN,QAAQ,CAACI,MAAD,CAAb,EAAuB;AACrB;AACAJ,UAAAA,QAAQ,CAACI,MAAD,CAAR,GAAmB,CAACD,IAAD,CAAnB;AACD,SAHD,MAGO;AACL;AACAH,UAAAA,QAAQ,CAACI,MAAD,CAAR,CAAiBG,IAAjB,CAAsBJ,IAAtB;AACD;AACF,OAZD,EAHuB,CAgBvB;;AACAJ,MAAAA,SAAS,GAAGS,MAAM,CAACC,IAAP,CAAYT,QAAZ,EAAsBU,IAAtB,EAAZ;AACA,aAAO;AACLX,QAAAA,SADK;AAELC,QAAAA;AAFK,OAAP;AAID,KAlD8B;AAAA;;AAG/BW,EAAAA,iBAAiB,GAAG;AAClB,SAAKjB,WAAL;AACD,GAL8B,CAS/B;;;AA4CAkB,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF;AAKD;;AA3D8B;;AA8DjC,eAAenB,QAAf","sourcesContent":["/**\r\n * 城市列表\r\n */\r\nimport React, { Component } from 'react';\r\nimport { getCityList } from '../../utils/api/city';\r\n\r\n\r\nclass CityList extends Component {\r\n\r\n\r\n  componentDidMount() {\r\n    this.getCityData()\r\n  }\r\n\r\n\r\n\r\n  // 获取城市列表数据\r\n  getCityData = async () => {\r\n    const { status, data } = await getCityList();\r\n    console.log('城市列表数据：', data);\r\n    if (status === 200) {\r\n      const { cityIndex, cityList } = this.formatCities(data);\r\n      console.log('按拼音首字母归类完的数据：', cityIndex, cityList)\r\n\r\n    }\r\n\r\n  }\r\n\r\n  // 处理数据 => 做列表渲染\r\n  //   1. 创建formatCities方法\r\n  // 2. 定义变量\r\n  //    * 按拼音首字母归类的城市数据=〉cityList = {}\r\n  //    * 所有城市首字母数据=》cityIndex=[]\r\n  // 3. 遍历后台返回的数据（利用=》**对象的属性不能相同的特点**）\r\n  // 4. 通过Object.keys(cityList)获取**所有城市首字母数组**\r\n  formatCities = (data) => {\r\n    // 城市归类的对象\r\n    let cityList = {}, cityIndex = [];\r\n    data.forEach((item) => {\r\n      // 数组排重\r\n      // 截取城市的拼音首字母\r\n      let cfirst = item.short.slice(0, 1);\r\n      // 按首字母归类\r\n      if (!cityList[cfirst]) {\r\n        // 没有这个首字母的key（城市）\r\n        cityList[cfirst] = [item]\r\n      } else {\r\n        // 对象里边已经包含这个首字母,新增=>按拼音首字母归类城市\r\n        cityList[cfirst].push(item)\r\n      }\r\n    })\r\n    // 取出所有的拼音首字母=》[]\r\n    cityIndex = Object.keys(cityList).sort();\r\n    return {\r\n      cityIndex,\r\n      cityList\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        CityList\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CityList;"]},"metadata":{},"sourceType":"module"}