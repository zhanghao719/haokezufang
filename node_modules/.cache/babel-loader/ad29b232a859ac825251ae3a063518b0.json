{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nexports.getDefaultProps = getDefaultProps;\n\nvar _arrayTreeFilter = require('array-tree-filter');\n\nvar _arrayTreeFilter2 = _interopRequireDefault(_arrayTreeFilter);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _Cascader = require('rmc-cascader/lib/Cascader');\n\nvar _Cascader2 = _interopRequireDefault(_Cascader);\n\nvar _Popup = require('rmc-cascader/lib/Popup');\n\nvar _Popup2 = _interopRequireDefault(_Popup);\n\nvar _MultiPicker = require('rmc-picker/lib/MultiPicker');\n\nvar _MultiPicker2 = _interopRequireDefault(_MultiPicker);\n\nvar _Picker = require('rmc-picker/lib/Picker');\n\nvar _Picker2 = _interopRequireDefault(_Picker);\n\nvar _getLocale = require('../_util/getLocale');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/* tslint:disable:jsx-no-multiline-js */\n\n\nfunction getDefaultProps() {\n  var defaultFormat = function defaultFormat(values) {\n    // label is JSX.Element or other\n    if (values.length > 0 && typeof values[0] !== 'string') {\n      return values;\n    }\n\n    return values.join(',');\n  };\n\n  return {\n    triggerType: 'onClick',\n    prefixCls: 'am-picker',\n    pickerPrefixCls: 'am-picker-col',\n    popupPrefixCls: 'am-picker-popup',\n    format: defaultFormat,\n    cols: 3,\n    cascade: true,\n    title: ''\n  };\n}\n\nvar AbstractPicker = function (_React$Component) {\n  (0, _inherits3['default'])(AbstractPicker, _React$Component);\n\n  function AbstractPicker() {\n    (0, _classCallCheck3['default'])(this, AbstractPicker);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, (AbstractPicker.__proto__ || Object.getPrototypeOf(AbstractPicker)).apply(this, arguments));\n\n    _this.getSel = function () {\n      var value = _this.props.value || [];\n      var treeChildren = void 0;\n      var data = _this.props.data;\n\n      if (_this.props.cascade) {\n        treeChildren = (0, _arrayTreeFilter2['default'])(data, function (c, level) {\n          return c.value === value[level];\n        });\n      } else {\n        treeChildren = value.map(function (v, i) {\n          return data[i].filter(function (d) {\n            return d.value === v;\n          })[0];\n        });\n      }\n\n      return _this.props.format && _this.props.format(treeChildren.map(function (v) {\n        return v.label;\n      }));\n    };\n\n    _this.getPickerCol = function () {\n      var _this$props = _this.props,\n          data = _this$props.data,\n          pickerPrefixCls = _this$props.pickerPrefixCls,\n          itemStyle = _this$props.itemStyle,\n          indicatorStyle = _this$props.indicatorStyle;\n      return data.map(function (col, index) {\n        return React.createElement(_Picker2['default'], {\n          key: index,\n          prefixCls: pickerPrefixCls,\n          style: {\n            flex: 1\n          },\n          itemStyle: itemStyle,\n          indicatorStyle: indicatorStyle\n        }, col.map(function (item) {\n          return React.createElement(_Picker2['default'].Item, {\n            key: item.value,\n            value: item.value\n          }, item.label);\n        }));\n      });\n    };\n\n    _this.onOk = function (v) {\n      if (_this.scrollValue !== undefined) {\n        v = _this.scrollValue;\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(v);\n      }\n\n      if (_this.props.onOk) {\n        _this.props.onOk(v);\n      }\n    };\n\n    _this.setScrollValue = function (v) {\n      _this.scrollValue = v;\n    };\n\n    _this.setCasecadeScrollValue = function (v) {\n      // 级联情况下保证数据正确性，滚动过程中只有当最后一级变化时才变更数据\n      if (v && _this.scrollValue) {\n        var length = _this.scrollValue.length;\n\n        if (length === v.length && _this.scrollValue[length - 1] === v[length - 1]) {\n          return;\n        }\n      }\n\n      _this.setScrollValue(v);\n    };\n\n    _this.fixOnOk = function (cascader) {\n      if (cascader && cascader.onOk !== _this.onOk) {\n        cascader.onOk = _this.onOk;\n        cascader.forceUpdate();\n      }\n    };\n\n    _this.onPickerChange = function (v) {\n      _this.setScrollValue(v);\n\n      if (_this.props.onPickerChange) {\n        _this.props.onPickerChange(v);\n      }\n    };\n\n    _this.onVisibleChange = function (visible) {\n      _this.setScrollValue(undefined);\n\n      if (_this.props.onVisibleChange) {\n        _this.props.onVisibleChange(visible);\n      }\n    };\n\n    return _this;\n  }\n\n  (0, _createClass3['default'])(AbstractPicker, [{\n    key: 'render',\n    value: function render() {\n      var _a = this.props,\n          children = _a.children,\n          _a$value = _a.value,\n          value = _a$value === undefined ? [] : _a$value,\n          popupPrefixCls = _a.popupPrefixCls,\n          itemStyle = _a.itemStyle,\n          indicatorStyle = _a.indicatorStyle,\n          okText = _a.okText,\n          dismissText = _a.dismissText,\n          extra = _a.extra,\n          cascade = _a.cascade,\n          prefixCls = _a.prefixCls,\n          pickerPrefixCls = _a.pickerPrefixCls,\n          data = _a.data,\n          cols = _a.cols,\n          onOk = _a.onOk,\n          restProps = __rest(_a, [\"children\", \"value\", \"popupPrefixCls\", \"itemStyle\", \"indicatorStyle\", \"okText\", \"dismissText\", \"extra\", \"cascade\", \"prefixCls\", \"pickerPrefixCls\", \"data\", \"cols\", \"onOk\"]); // tslint:disable-next-line:variable-name\n\n\n      var _locale = (0, _getLocale.getComponentLocale)(this.props, this.context, 'Picker', function () {\n        return require('./locale/zh_CN');\n      });\n\n      var cascader = void 0;\n      var popupMoreProps = {};\n\n      if (cascade) {\n        cascader = React.createElement(_Cascader2['default'], {\n          prefixCls: prefixCls,\n          pickerPrefixCls: pickerPrefixCls,\n          data: data,\n          cols: cols,\n          onChange: this.onPickerChange,\n          onScrollChange: this.setCasecadeScrollValue,\n          pickerItemStyle: itemStyle,\n          indicatorStyle: indicatorStyle\n        });\n      } else {\n        cascader = React.createElement(_MultiPicker2['default'], {\n          style: {\n            flexDirection: 'row',\n            alignItems: 'center'\n          },\n          prefixCls: prefixCls,\n          onScrollChange: this.setScrollValue\n        }, this.getPickerCol());\n        popupMoreProps = {\n          pickerValueProp: 'selectedValue',\n          pickerValueChangeProp: 'onValueChange'\n        };\n      }\n\n      return React.createElement(_Popup2['default'], (0, _extends3['default'])({\n        cascader: cascader\n      }, this.popupProps, restProps, {\n        prefixCls: popupPrefixCls,\n        value: value,\n        dismissText: dismissText || _locale.dismissText,\n        okText: okText || _locale.okText\n      }, popupMoreProps, {\n        ref: this.fixOnOk,\n        onVisibleChange: this.onVisibleChange\n      }), children && typeof children !== 'string' && React.isValidElement(children) && React.cloneElement(children, {\n        extra: this.getSel() || extra || _locale.extra\n      }));\n    }\n  }]);\n  return AbstractPicker;\n}(React.Component);\n\nexports['default'] = AbstractPicker;","map":{"version":3,"sources":["F:/百度云下载/React/hkzf/haokezufang/node_modules/antd-mobile/lib/picker/AbstractPicker.js"],"names":["Object","defineProperty","exports","value","_extends2","require","_extends3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","getDefaultProps","_arrayTreeFilter","_arrayTreeFilter2","_react","React","_interopRequireWildcard","_Cascader","_Cascader2","_Popup","_Popup2","_MultiPicker","_MultiPicker2","_Picker","_Picker2","_getLocale","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","__rest","undefined","s","e","t","p","indexOf","getOwnPropertySymbols","i","length","defaultFormat","values","join","triggerType","prefixCls","pickerPrefixCls","popupPrefixCls","format","cols","cascade","title","AbstractPicker","_React$Component","_this","__proto__","getPrototypeOf","apply","arguments","getSel","props","treeChildren","data","c","level","map","v","filter","d","label","getPickerCol","_this$props","itemStyle","indicatorStyle","col","index","createElement","style","flex","item","Item","onOk","scrollValue","onChange","setScrollValue","setCasecadeScrollValue","fixOnOk","cascader","forceUpdate","onPickerChange","onVisibleChange","visible","render","_a","children","_a$value","okText","dismissText","extra","restProps","_locale","getComponentLocale","context","popupMoreProps","onScrollChange","pickerItemStyle","flexDirection","alignItems","pickerValueProp","pickerValueChangeProp","popupProps","ref","isValidElement","cloneElement","Component"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nexports.getDefaultProps = getDefaultProps;\n\nvar _arrayTreeFilter = require('array-tree-filter');\n\nvar _arrayTreeFilter2 = _interopRequireDefault(_arrayTreeFilter);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _Cascader = require('rmc-cascader/lib/Cascader');\n\nvar _Cascader2 = _interopRequireDefault(_Cascader);\n\nvar _Popup = require('rmc-cascader/lib/Popup');\n\nvar _Popup2 = _interopRequireDefault(_Popup);\n\nvar _MultiPicker = require('rmc-picker/lib/MultiPicker');\n\nvar _MultiPicker2 = _interopRequireDefault(_MultiPicker);\n\nvar _Picker = require('rmc-picker/lib/Picker');\n\nvar _Picker2 = _interopRequireDefault(_Picker);\n\nvar _getLocale = require('../_util/getLocale');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n/* tslint:disable:jsx-no-multiline-js */\nfunction getDefaultProps() {\n    var defaultFormat = function defaultFormat(values) {\n        // label is JSX.Element or other\n        if (values.length > 0 && typeof values[0] !== 'string') {\n            return values;\n        }\n        return values.join(',');\n    };\n    return {\n        triggerType: 'onClick',\n        prefixCls: 'am-picker',\n        pickerPrefixCls: 'am-picker-col',\n        popupPrefixCls: 'am-picker-popup',\n        format: defaultFormat,\n        cols: 3,\n        cascade: true,\n        title: ''\n    };\n}\n\nvar AbstractPicker = function (_React$Component) {\n    (0, _inherits3['default'])(AbstractPicker, _React$Component);\n\n    function AbstractPicker() {\n        (0, _classCallCheck3['default'])(this, AbstractPicker);\n\n        var _this = (0, _possibleConstructorReturn3['default'])(this, (AbstractPicker.__proto__ || Object.getPrototypeOf(AbstractPicker)).apply(this, arguments));\n\n        _this.getSel = function () {\n            var value = _this.props.value || [];\n            var treeChildren = void 0;\n            var data = _this.props.data;\n\n            if (_this.props.cascade) {\n                treeChildren = (0, _arrayTreeFilter2['default'])(data, function (c, level) {\n                    return c.value === value[level];\n                });\n            } else {\n                treeChildren = value.map(function (v, i) {\n                    return data[i].filter(function (d) {\n                        return d.value === v;\n                    })[0];\n                });\n            }\n            return _this.props.format && _this.props.format(treeChildren.map(function (v) {\n                return v.label;\n            }));\n        };\n        _this.getPickerCol = function () {\n            var _this$props = _this.props,\n                data = _this$props.data,\n                pickerPrefixCls = _this$props.pickerPrefixCls,\n                itemStyle = _this$props.itemStyle,\n                indicatorStyle = _this$props.indicatorStyle;\n\n            return data.map(function (col, index) {\n                return React.createElement(\n                    _Picker2['default'],\n                    { key: index, prefixCls: pickerPrefixCls, style: { flex: 1 }, itemStyle: itemStyle, indicatorStyle: indicatorStyle },\n                    col.map(function (item) {\n                        return React.createElement(\n                            _Picker2['default'].Item,\n                            { key: item.value, value: item.value },\n                            item.label\n                        );\n                    })\n                );\n            });\n        };\n        _this.onOk = function (v) {\n            if (_this.scrollValue !== undefined) {\n                v = _this.scrollValue;\n            }\n            if (_this.props.onChange) {\n                _this.props.onChange(v);\n            }\n            if (_this.props.onOk) {\n                _this.props.onOk(v);\n            }\n        };\n        _this.setScrollValue = function (v) {\n            _this.scrollValue = v;\n        };\n        _this.setCasecadeScrollValue = function (v) {\n            // 级联情况下保证数据正确性，滚动过程中只有当最后一级变化时才变更数据\n            if (v && _this.scrollValue) {\n                var length = _this.scrollValue.length;\n                if (length === v.length && _this.scrollValue[length - 1] === v[length - 1]) {\n                    return;\n                }\n            }\n            _this.setScrollValue(v);\n        };\n        _this.fixOnOk = function (cascader) {\n            if (cascader && cascader.onOk !== _this.onOk) {\n                cascader.onOk = _this.onOk;\n                cascader.forceUpdate();\n            }\n        };\n        _this.onPickerChange = function (v) {\n            _this.setScrollValue(v);\n            if (_this.props.onPickerChange) {\n                _this.props.onPickerChange(v);\n            }\n        };\n        _this.onVisibleChange = function (visible) {\n            _this.setScrollValue(undefined);\n            if (_this.props.onVisibleChange) {\n                _this.props.onVisibleChange(visible);\n            }\n        };\n        return _this;\n    }\n\n    (0, _createClass3['default'])(AbstractPicker, [{\n        key: 'render',\n        value: function render() {\n            var _a = this.props,\n                children = _a.children,\n                _a$value = _a.value,\n                value = _a$value === undefined ? [] : _a$value,\n                popupPrefixCls = _a.popupPrefixCls,\n                itemStyle = _a.itemStyle,\n                indicatorStyle = _a.indicatorStyle,\n                okText = _a.okText,\n                dismissText = _a.dismissText,\n                extra = _a.extra,\n                cascade = _a.cascade,\n                prefixCls = _a.prefixCls,\n                pickerPrefixCls = _a.pickerPrefixCls,\n                data = _a.data,\n                cols = _a.cols,\n                onOk = _a.onOk,\n                restProps = __rest(_a, [\"children\", \"value\", \"popupPrefixCls\", \"itemStyle\", \"indicatorStyle\", \"okText\", \"dismissText\", \"extra\", \"cascade\", \"prefixCls\", \"pickerPrefixCls\", \"data\", \"cols\", \"onOk\"]);\n            // tslint:disable-next-line:variable-name\n            var _locale = (0, _getLocale.getComponentLocale)(this.props, this.context, 'Picker', function () {\n                return require('./locale/zh_CN');\n            });\n            var cascader = void 0;\n            var popupMoreProps = {};\n            if (cascade) {\n                cascader = React.createElement(_Cascader2['default'], { prefixCls: prefixCls, pickerPrefixCls: pickerPrefixCls, data: data, cols: cols, onChange: this.onPickerChange, onScrollChange: this.setCasecadeScrollValue, pickerItemStyle: itemStyle, indicatorStyle: indicatorStyle });\n            } else {\n                cascader = React.createElement(\n                    _MultiPicker2['default'],\n                    { style: { flexDirection: 'row', alignItems: 'center' }, prefixCls: prefixCls, onScrollChange: this.setScrollValue },\n                    this.getPickerCol()\n                );\n                popupMoreProps = {\n                    pickerValueProp: 'selectedValue',\n                    pickerValueChangeProp: 'onValueChange'\n                };\n            }\n            return React.createElement(\n                _Popup2['default'],\n                (0, _extends3['default'])({ cascader: cascader }, this.popupProps, restProps, { prefixCls: popupPrefixCls, value: value, dismissText: dismissText || _locale.dismissText, okText: okText || _locale.okText }, popupMoreProps, { ref: this.fixOnOk, onVisibleChange: this.onVisibleChange }),\n                children && typeof children !== 'string' && React.isValidElement(children) && React.cloneElement(children, {\n                    extra: this.getSel() || extra || _locale.extra\n                })\n            );\n        }\n    }]);\n    return AbstractPicker;\n}(React.Component);\n\nexports['default'] = AbstractPicker;"]},"metadata":{},"sourceType":"script"}